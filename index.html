<!DOCTYPE html>
<html dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>  لمنظومه المنافذ الصحيه</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #1e3a8a;
            --secondary: #3b82f6;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --bg-gradient: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #1e293b;
        }

        .app-container {
            background: var(--card-bg);
            width: 100%;
            max-width: 450px;
            border-radius: 24px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            overflow: hidden;
            position: relative;
            animation: fadeIn 0.5s ease;
        }

        .header-brand {
            background: var(--primary);
            padding: 30px 20px;
            text-align: center;
            color: white;
        }

        .logo-placeholder {
            width: 70px;
            height: 70px;
            background: white;
            border-radius: 18px;
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }

        .header-brand h1 {
            margin: 0;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .content-body {
            padding: 25px;
        }

        h2 {
            text-align: center;
            color: var(--primary);
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .input-group {
            margin-bottom: 15px;
            text-align: right;
        }

        input, select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 0.95rem;
            font-family: inherit;
            transition: all 0.3s ease;
            box-sizing: border-box;
            background-color: #f8fafc;
        }

        /* تنسيق خاص للقوائم المنسدلة لمحاكاة السهم الجديد */
        select {
            appearance: none;
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2364748b'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: left 12px center;
            background-size: 20px;
            padding-left: 35px;
        }

        input:focus, select:focus {
            border-color: var(--secondary);
            outline: none;
            background-color: white;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
        }

        button {
            width: 100%;
            border: none;
            padding: 14px;
            border-radius: 12px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-login { background: var(--primary); box-shadow: 0 4px 12px rgba(30, 58, 138, 0.2); }
        .btn-reg { background: var(--success); box-shadow: 0 4px 12px rgba(16, 185, 129, 0.2); }
        
        button:active { transform: scale(0.97); }

        .toggle-link {
            display: block;
            text-align: center;
            margin-top: 20px;
            color: var(--secondary);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
        }

        #status {
            margin-top: 15px;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            font-size: 0.85rem;
            font-weight: 600;
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .footer-credits {
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            text-align: center;
            font-size: 0.75rem;
            color: #94a3b8;
        }

        .contact-link {
            color: var(--secondary);
            text-decoration: none;
            font-weight: 700;
        }

        .hidden { display: none !important; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 480px) {
            body { padding: 10px; }
            .app-container { border-radius: 0; min-height: 100vh; }
        }
    </style>
</head>
<body>

<div class="app-container">
    <div class="header-brand">
        <div class="logo-placeholder">
            <img src="data:image/png;base64,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" alt="UHIA Logo" style="width: 80%; height: 80%; object-fit: contain;">
        </div>
        <h1>منظومه المنافذ الصحيه</h1>
    </div>

    <div class="content-body">
        <div id="login-box">
            <h2>تسجيل الدخول</h2>
            <div class="input-group">
                <input type="text" id="login-id" placeholder="الرقم القومي (14 رقم)" maxlength="14">
            </div>
            <div class="input-group">
                <input type="password" id="login-pass" placeholder="كلمة المرور">
            </div>
            <button class="btn-login" onclick="handleLogin()">
                <i class="material-icons">login</i>  تسجيل دخول
            </button>
            <span class="toggle-link" onclick="toggleAuth()">ليس لديك حساب؟ سجل الآن</span>
        </div>

        <div id="reg-box" class="hidden">
            <h2>حساب جديد</h2>
            <input type="text" id="reg-name" placeholder="الاسم الرباعي" style="margin-bottom: 8px;">
            <input type="text" id="reg-id" placeholder="الرقم القومي (14 رقم)" maxlength="14" style="margin-bottom: 8px;">
            <input type="tel" id="reg-phone" placeholder="رقم الهاتف (11 رقم)" maxlength="11" style="margin-bottom: 8px;">
            
            <select id="reg-gov" onchange="filterFacilities(this.value)" style="margin-bottom: 8px;">
                <option value="">اختر المحافظة</option>
                <option>القاهرة</option><option>الجيزة</option><option>الإسكندرية</option>
                <option>بورسعيد</option><option>السويس</option><option>الإسماعيلية</option>
                <option>البحيرة</option><option>دمياط</option><option>الشرقية</option>
                <option>الغربية</option><option>المنوفية</option><option>الدقهلية</option>
                <option>الفيوم</option><option>المنيا</option><option>أسيوط</option>
                <option>سوهاج</option><option>قنا</option><option>أسوان</option>
                <option>كفر الشيخ</option><option>شمال سيناء</option><option>جنوب سيناء</option>
                <option>البحر الاحمر</option><option>الوادي الجديد</option><option>الاقصر</option>
                <option>مطروح</option><option>بني سويف</option><option>القليوبيه</option>
            </select>

            <select id="reg-fac-select" onchange="toggleOtherInput(this.value)" style="margin-bottom: 8px;">
                <option value="">اختر المنشأة</option>
            </select>
            
            <input type="text" id="reg-fac-other" class="hidden" placeholder="اكتب اسم المنشأة الجديدة" style="margin-bottom: 8px;">

            <select id="reg-shift" style="margin-bottom: 8px;">
                <option value="">اختر الوردية </option>
                <option value="صباحي">صباحي</option>
                <option value="مسائي">مسائي</option>
            </select>

            <input type="password" id="reg-pass" placeholder="كلمة المرور">
            <button class="btn-reg" onclick="handleRegister()">
                <i class="material-icons">person_add</i> إنشاء حساب
            </button>
            <span class="toggle-link" onclick="toggleAuth()">لديك حساب بالفعل؟ سجل دخول</span>
        </div>

        <div id="status"></div>

        <div class="footer-credits">
            <div style="margin-bottom: 8px;">
                <span>لأي شكاوى أو اقتراحات: </span>
                <a href="mailto:randa.abdo@uhia.gov.eg" class="contact-link">randa.abdo@uhia.gov.eg</a>
            </div>
            <div style="border-top: 1px solid #eee; padding-top: 10px; font-weight: 600;">
                جميع الحقوق محفوظة &copy; 2026 - الهيئة العامة للتأمين الصحي الشامل UHIA
            </div>
        </div>
    </div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getFirestore, doc, setDoc, getDoc, updateDoc, arrayUnion, collection, getDocs, query, where } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyDgiNw5Dt6EkiokRjznzGkfZvVuDN0APPk",
        authDomain: "uhia-attendancesystem.firebaseapp.com",
        projectId: "uhia-attendancesystem",
        storageBucket: "uhia-attendancesystem.firebasestorage.app",
        messagingSenderId: "104444545133",
        appId: "1:104444545133:web:f40607b93fb90a8f511764"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.toggleAuth = () => {
        document.getElementById('login-box').classList.toggle('hidden');
        document.getElementById('reg-box').classList.toggle('hidden');
        document.getElementById('status').style.display = 'none';
    };

    window.filterFacilities = async (gov) => {
        const facSelect = document.getElementById('reg-fac-select');
        facSelect.innerHTML = '<option value="">جاري تحميل المنشآت...</option>';
        try {
            const q = query(collection(db, "FacilitiesReference"), where("governorate", "==", gov));
            const snap = await getDocs(q);
            facSelect.innerHTML = '<option value="">اختر المنشأة</option>';
            snap.forEach(doc => { facSelect.add(new Option(doc.data().facilityName, doc.data().facilityName)); });
            facSelect.add(new Option("-- أخرى (منشأة جديدة) --", "other"));
        } catch (e) { facSelect.innerHTML = '<option value="other">خطأ - اختر أخرى واكتب الاسم</option>'; }
    };

    window.toggleOtherInput = (val) => {
        document.getElementById('reg-fac-other').classList.toggle('hidden', val !== 'other');
    };

 window.handleRegister = async () => {
    const id = document.getElementById('reg-id').value.trim();
    const phone = document.getElementById('reg-phone').value.trim();
    const name = document.getElementById('reg-name').value.trim();
    const pass = document.getElementById('reg-pass').value.trim();
    const gov = document.getElementById('reg-gov').value;
    const shift = document.getElementById('reg-shift').value;
    let facSelectValue = document.getElementById('reg-fac-select').value;
    let facName = facSelectValue === 'other' ? document.getElementById('reg-fac-other').value.trim() : facSelectValue;

    // التحقق من الحقول
    if (id.length !== 14 || phone.length !== 11 || !facName || !name || !pass || !gov) {
        return showStatus("يرجى التأكد من كافة البيانات واختيار المنشأة", "var(--danger)");
    }

    try {
        showStatus("جاري تحديد موقع المنشأة والتحقق...", "var(--warning)");

        // دالة للحصول على الموقع الجغرافي
        const getPosition = () => {
            return new Promise((resolve, reject) => {
                navigator.geolocation.getCurrentPosition(resolve, reject, {
                    enableHighAccuracy: true,
                    timeout: 10000
                });
            });
        };

        let currentLat = 0;
        let currentLng = 0;

        // إذا كانت المنشأة جديدة، نأخذ إحداثيات المستخدم الحالية كإحداثيات للمقر
        if (facSelectValue === 'other') {
            try {
                const pos = await getPosition();
                currentLat = pos.coords.latitude;
                currentLng = pos.coords.longitude;
            } catch (geoErr) {
                return showStatus("يجب السماح بالوصول للموقع لتسجيل منشأة جديدة", "var(--danger)");
            }
        }

        // 1. تسجيل المستخدم في نظام المستخدمين
        await setDoc(doc(db, "UsersRegistry", id), {
            fullName: name, 
            nationalID: id, 
            phoneNumber: phone,
            governorate: gov, 
            facility: facName, 
            shift: shift, 
            password: pass,
            role: 'user' // تحديد الدور الافتراضي
        });

        const facDocID = `${gov}-${facName}`.replace(/\s+/g, '_');
        const facRef = doc(db, "FacilitiesReference", facDocID);
        const facSnap = await getDoc(facRef);
        const newStaff = { name: name, phone: phone, nationalID: id };

        if (facSnap.exists()) {
            // إذا كانت المنشأة موجودة مسبقاً، نكتفي بإضافة الموظف للقائمة
            await updateDoc(facRef, { staffList: arrayUnion(newStaff) });
        } else {
            // إذا كانت جديدة، ننشئها بالإحداثيات التي التقطناها
            await setDoc(facRef, { 
                facilityName: facName, 
                governorate: gov, 
                lat: currentLat, 
                lng: currentLng, 
                staffList: [newStaff] 
            });
        }

        showStatus("تم التسجيل بنجاح! يمكنك الآن تسجيل الدخول.", "var(--success)");
        setTimeout(toggleAuth, 20); // العودة لصفحة الدخول بعد النجاح
    } catch (e) { 
        console.error(e);
        showStatus("حدث خطأ أثناء التسجيل: " + e.message, "var(--danger)"); 
    }
};
window.handleLogin = async () => {
    const id = document.getElementById('login-id').value.trim(); // سيقبل "uhia" أو الرقم القومي
    const pass = document.getElementById('login-pass').value.trim();
    
    if(!id || !pass) return showStatus("يرجى إدخال البيانات", "var(--danger)");

    try {
        showStatus("جاري التحقق...", "var(--warning)");
        // البحث عن المستند باستخدام المعرف (سواء كان uhia أو رقم قومي)
        const userSnap = await getDoc(doc(db, "UsersRegistry", id));
        
        if (userSnap.exists()) {
            const userData = userSnap.data();
            if (userData.password === pass) {
                sessionStorage.setItem('userData', JSON.stringify(userData));
                
                // التوجيه بناءً على الرتبة
                if (userData.role === 'admin') {
                    window.location.href = "admin.html"; 
                } else {
                    window.location.href = "attendance.html";
                }
            } else {
                showStatus("كلمة المرور غير صحيحة", "var(--danger)");
            }
        } else {
            showStatus("اسم المستخدم أو الرقم القومي غير مسجل", "var(--danger)");
        }
    } catch (e) { 
        console.error(e);
        showStatus("فشل الاتصال بالخادم", "var(--danger)"); 
    }
};

    function showStatus(msg, color) {
        const s = document.getElementById('status');
        s.innerText = msg; s.style.display = 'block'; 
        s.style.color = color; s.style.backgroundColor = color + "15";
        s.style.border = "1px solid " + color;
    }
</script>
</body>
</html>